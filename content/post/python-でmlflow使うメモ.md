+++
title = "python ã§mlflowä½¿ã†ãƒ¡ãƒ¢"
date = 2020-07-18T16:24:00Z
updated = 2020-07-18T16:24:06Z
tags = ["æŠ€è¡“ç³»"]
blogimport = true 
[author]
	name = "ã‚µãƒ–ã‚«ãƒ«ç§‘å­¦ç ”ç©¶ä¼š"
	uri = "https://draft.blogger.com/profile/00849312168396849001"
+++

<html><head>      <meta charset="utf-8">      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/monokai-sublime.min.css" integrity="sha256-kTdkFYZP3TqSvlJAUiZ6/s5L2xu4xsdU9eYMWsKOk74=" crossorigin="anonymous">			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css" integrity="sha256-HbgiGHMLxHZ3kkAiixyvnaaZFNjNWLYKD/QG6PWaQPc=" crossorigin="anonymous">			<link rel="stylesheet" href="/css/guest.bundle.css?v=0.13.0"><style type="text/css">      .markdown-body { 			  box-sizing: border-box; 			  min-width: 200px; 			  max-width: 980px; 			  margin: 0 auto; 			  padding: 45px; 			} 			.markdown-body pre { 			  background: #23241f; 			} 			.markdown-body strong, 			.markdown-body h1, 			.markdown-body h2, 			.markdown-body h3, 			.markdown-body h4, 			.markdown-body h5 { 			  font-weight: 700; 			} 			@media (max-width: 767px) { 			  .markdown-body { 			    padding: 15px; 			  } 			}</style><script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><title>python ã§mlflowä½¿ã†ãƒ¡ãƒ¢</title></head><body><div class="markdown-body"><h1 id="python_ã§mlflowä½¿ã†ãƒ¡ãƒ¢" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">python ã§mlflowä½¿ã†ãƒ¡ãƒ¢<a href="#python_ã§mlflowä½¿ã†ãƒ¡ãƒ¢" title="python_ã§mlflowä½¿ã†ãƒ¡ãƒ¢"><i class="fas fa-link ml-1" style="display:none;"></i></a></h1><p>å®Ÿé¨“çµæœã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã«ä¾¿åˆ©ã£ã½ã„ã®ã§ä½¿ã£ã¦ã¿ãŸã€‚ä½¿ã†éš›ã®æ‰‹é †ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚</p><p>ç›®æ¬¡</p><ul><li><a href='#mlflow_ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«'>mlflow ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li><li><a href='#ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ'>ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</a></li><li><a href='#å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹'>å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹</a></li><li><a href='#å®Ÿé¨“çµæœã®æ¯”è¼ƒ'>å®Ÿé¨“çµæœã®æ¯”è¼ƒ</a></li><li><a href='#ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚'>ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚</a></li></ul> <h2 id="mlflow_ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">mlflow ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<a href="#mlflow_ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" title="mlflow_ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><pre><code>pip install mlflow</code></pre><h2 id="ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ<a href="#ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ" title="ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>pythonã§ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ã‚’ç”¨ã„ã‚‹ã€‚</p><pre><code>with mlflow.start_run():<br />   mlflow.log_param(&quot;a&quot;, 1)<br />   mlflow.log_metric(&quot;b&quot;, 2)<br />   mlflow.log_artifact(&quot;output.txt&quot;)</code></pre><p>log_paramã«ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹ã€‚</p><p>log_metricã«ã¯æå¤±é–¢æ•°ã‚„è©•ä¾¡æŒ‡æ¨™ã‚’å…¥ã‚Œã‚‹ã€‚valueã«ã¯æ•°å€¤ã—ã‹å—ã‘ä»˜ã‘ãªã„ã€‚</p><p>log_params({&quot;example&quot;:hogeï¼Œâ€œexample2â€ï¼šTrue})ã®æ–¹ãŒä¾¿åˆ©ã€‚ åŒæ§˜ã«log_metricsã‚‚ã‚ã‚‹ã€‚</p><p>log_artifact ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã§ãã‚‹(csvã‚„jsonãªã©)ã€‚metricã®æ›¸å¼ã«å½“ã¦ã¯ã¾ã‚‰ãªã„ã‚‚ã®ã‚’ã“ã¡ã‚‰ã§ä¿å­˜ã™ã‚‹ã€‚</p><h2 id="å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹<a href="#å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹" title="å®Ÿé¨“ã®ç¨®é¡ã”ã¨ã«æ ã‚’ä½œã‚‹"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>CLI ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦experimentã‚’ä½œæˆã™ã‚‹ã€‚</p><pre><code>mlflow experiments create --experiment-name fraud-detection</code></pre><p>CLI ã§experimentãŒä½œæˆã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã€‚</p><p>experiment _idã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚</p><pre><code>mlflow experiments list<br /></code></pre><p>ä»¥ä¸‹ã®ã‚ˆã†ã«pythonã§è¨˜è¿°ã—ã¦ã€experimentã‚’æŒ‡å®šã™ã‚‹ã€‚</p><pre><code>mlflow.set_experiment(&#39;experiment_name&#39;)<br /><br />with mlflow.start_run():<br />   mlflow.log_param(&quot;a&quot;, 1)<br />   mlflow.log_metric(&quot;b&quot;, 2)<br />   mlflow.log_artifact(&quot;output.txt&quot;)<br /></code></pre><h2 id="å®Ÿé¨“çµæœã®æ¯”è¼ƒ" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">å®Ÿé¨“çµæœã®æ¯”è¼ƒ<a href="#å®Ÿé¨“çµæœã®æ¯”è¼ƒ" title="å®Ÿé¨“çµæœã®æ¯”è¼ƒ"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>CLIã§ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã€‚</p><pre><code>mlflow ui</code></pre><p>è¡¨ç¤ºã•ã‚ŒãŸã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€‚</p><p>ã‚µãƒ¼ãƒãƒ¼ã‚’è½ã¨ã™æ™‚ã¯killã™ã‚‹ã€‚(ã‚ã‚“ã¾ã‚Šã‚¹ãƒãƒ¼ãƒˆã˜ã‚ƒãªã„ãªãï¼Ÿ)</p><h2 id="ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚<a href="#ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚" title="ä»Šå›ã®ã¯ã¾ã‚Šã©ã“ã‚"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>experiment ã‚’æ–°ã—ãä½œæˆã—ã¦ã€ æ–°ãŸã«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã‚ˆã†ã¨ã™ã‚‹ã¨ãã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã¨ãã¯ã€ æ—¢ã«ã‚µãƒ¼ãƒãƒ¼ãŒç«‹ã¡ä¸ŠãŒã£ã¦ã‚‹ã®ã‹ã‚‚ã€‚</p><p>kill ã—ã¦å¯¾å¿œã—ãŸã€‚</p></div></body><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><script>		  $(document).on("mouseover", "h1,h2,h3,h4,h5", function(e) { 		    $(e.currentTarget).find(".fa-link").text("ğŸ”—").show(); 		  }); 		  $(document).on("mouseout", "h1,h2,h3,h4,h5", function(e) { 		    $(e.currentTarget).find(".fa-link").hide(); 		  });</script></html>
