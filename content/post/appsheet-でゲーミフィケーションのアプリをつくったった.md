+++
title = "AppSheet でゲーミフィケーションのアプリをつくったった"
date = 2020-07-06T12:19:00Z
updated = 2020-07-06T12:20:46Z
tags = ["技術系"]
blogimport = true 
[author]
	name = "サブカル科学研究会"
	uri = "https://draft.blogger.com/profile/00849312168396849001"
+++

<body><div class="markdown-body"><p>目次</p><ul><li><a href='#ゲーミフィケーション'>ゲーミフィケーション</a></li><li><a href='#ゲーム化したいこと'>ゲーム化したいこと</a></li><li><a href='#ゲームの骨子'>ゲームの骨子</a></li><li><a href='#ノーコードでアプリ作成'>ノーコードでアプリ作成</a></li><li><a href='#AppSheet'>AppSheet</a><ul><li><a href='#手順'>手順</a></li><li><a href='#完成品'>完成品</a></li><li><a href='#ハマったところ'>ハマったところ</a></li><li><a href='#ハマったところ2'>ハマったところ2</a></li><li><a href='#実装したいこと'>実装したいこと</a></li></ul></li><li><a href='#まとめ'>まとめ</a></li></ul> <h1 id="AppSheet_でゲーミフィケーションのアプリをつくったった" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">AppSheet でゲーミフィケーションのアプリをつくったった<a href="#AppSheet_でゲーミフィケーションのアプリをつくったった" title="AppSheet_でゲーミフィケーションのアプリをつくったった"><i class="fas fa-link ml-1" style="display:none;"></i></a></h1><p>ノーコードでアプリを作ったのでその過程とハマったところを記録しておく。</p><h2 id="ゲーミフィケーション" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ゲーミフィケーション<a href="#ゲーミフィケーション" title="ゲーミフィケーション"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>ゲーム感覚で日常のタスクをこなしていこう、というもの。</p><p>ゲーム感覚で楽しく取り組むための工夫についての学問がゲーミフィケーション。</p><p>その基本的なポイントとして報酬とペナルティがある。</p><p>人間はスコアアタックに魅力を感じて、スコアをロストすることに嫌悪感を覚える</p><p>その習性を利用して日常の習慣をゲームにする。</p><h2 id="ゲーム化したいこと" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ゲーム化したいこと<a href="#ゲーム化したいこと" title="ゲーム化したいこと"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>私はストーリーに興味がある。RPGをやっていてもお話やキャラ同士の掛け合いに強く関心を持っていた。テイルズオブシリーズとか大好きだった。</p><p>そこで自分でもストーリーを作れるようになりたい。</p><p>その練習として即興小説を毎日書くモチベーションを作りたい。</p><h2 id="ゲームの骨子" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ゲームの骨子<a href="#ゲームの骨子" title="ゲームの骨子"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>ゲームの内容としては、即興小説を毎日書くとスコアアップして、サボるとスコアがリセットされるようにしたい。</p><h2 id="ノーコードでアプリ作成" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ノーコードでアプリ作成<a href="#ノーコードでアプリ作成" title="ノーコードでアプリ作成"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>一度アプリ作成に取り組んでみたかった。</p><p>私に現時点でアプリ作成の技能や知識はないので、その点を補助するツールが必要になる。</p><p>そこでノーコードでアプリを作成できるツールを見つけた。AppSheetだ。</p><h2 id="AppSheet" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">AppSheet<a href="#AppSheet" title="AppSheet"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>Google が買収したことで話題になったノーコードでアプリを作成できるサービス。</p><p>公式にデプロイするのは有料アカウントが必要になる。</p><p>個人でアプリのテストを行う間は無料なので、アプリを自分だけが使う場合には無料コースでも大丈夫。</p><p>試しに触ってみる。</p><h3 id="手順" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">手順<a href="#手順" title="手順"><i class="fas fa-link ml-1" style="display:none;"></i></a></h3><p>サインアップ。グーグルのアカウントを使った。</p><p>データからアプリを作成を選択。</p><p>事前にスプレッドシートでどういう仕組みになって欲しいかを練れる。スプレッドシートをアプリにするためのUIを自動で作ってくれるイメージで進められる。</p><p>スプレッドシートの内容をアプリにするイメージで進めていく。</p><h3 id="完成品" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">完成品<a href="#完成品" title="完成品"><i class="fas fa-link ml-1" style="display:none;"></i></a></h3><p>ゲームのスコアに換算するタスクをメモする画面。</p><p>達成したかどうかもメモ出来るようにした。</p><p><img src="https://firebasestorage.googleapis.com/v0/b/type-c1c71.appspot.com/o/sFFppLC9lKbI3buFnlzA926bb3G3%2FX2ovK6qq9xA4xLmi.jpg?alt=media&token=cde3f7b1-4a48-4b95-9973-418e0245dc99" alt="sFFppLC9lKbI3buFnlzA926bb3G3/X2ovK6qq9xA4xLmi.jpg"></p><p>その日に達成したスコアを記入する画面。</p><p>前のページで達成した個数をカウントして初期値にしている。</p><p>AppSheet にCOUNTIF関数はないので、以下の記事を参考にした。</p><p><a href="https://community.appsheet.com/t/is-there-any-way-i-can-do-countifs-function/652">https://community.appsheet.com/t/is-there-any-way-i-can-do-countifs-function/652</a></p><pre><code>COUNT(SELECT(シート2[やった], AND([やった], ( [e-mail]=USEREMAIL())))</code></pre><p>[やった]がtrueでユーザーのe-mailが一致するデータを集計している。</p><p><img src="https://firebasestorage.googleapis.com/v0/b/type-c1c71.appspot.com/o/sFFppLC9lKbI3buFnlzA926bb3G3%2F5nCfU7Xep17MPUjg.jpg?alt=media&token=368c2bb6-8157-4b26-8cca-f9b1accd23cd" alt="sFFppLC9lKbI3buFnlzA926bb3G3/5nCfU7Xep17MPUjg.jpg"></p><p>これまでのタスク達成の履歴を表示する画面。</p><p><img src="https://firebasestorage.googleapis.com/v0/b/type-c1c71.appspot.com/o/sFFppLC9lKbI3buFnlzA926bb3G3%2FLXsAH8URlnrgvMtt.jpg?alt=media&token=9b5a9915-72a8-4342-ae31-bf33f070c60a" alt="sFFppLC9lKbI3buFnlzA926bb3G3/LXsAH8URlnrgvMtt.jpg"></p><p>これまでの総合スコアの推移をグラフにして表示する画面。</p><p><img src="https://firebasestorage.googleapis.com/v0/b/type-c1c71.appspot.com/o/sFFppLC9lKbI3buFnlzA926bb3G3%2F0sszXLZI7voP6NLN.jpg?alt=media&token=81679d44-28f9-4064-a8c2-6df25df811bd" alt="sFFppLC9lKbI3buFnlzA926bb3G3/0sszXLZI7voP6NLN.jpg"></p><h3 id="ハマったところ" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ハマったところ<a href="#ハマったところ" title="ハマったところ"><i class="fas fa-link ml-1" style="display:none;"></i></a></h3><p>ノーコードとは言いつつ、凝ったことをしようと思うと、データベースを弄る必要がある。</p><p>今回は継続スコアを計算させたかったため、条件分岐やスコアの足し算をするために二つの行を参照する必要があった。</p><p>その際にデータベースに関する知識を必要とされるので、ど素人にも扱えるかというと微妙。でもアプリを作りながら関連する知識を身につけていこうという方針ならオススメできる。私も手を動かしながら、足りない知識を要所要所で勉強するつもりで取り組んだ。</p><p>データベースについての知識をほぼ持っていないので、スプレッドシートを参照する関数を作成するときに挙動が想像出来なかった。</p><p>出力される項目を間違えていたためにデバッグに二時間ほど費やした。</p><p>日付で前日の情報が無い場合には継続スコアをリセットする関数を作ろうとした。</p><p>検索の関数に与える条件を間違えていたために、日付で検索して日付を出力するようになっていた。</p><p>間違っていた部分</p><pre><code>SELECT (シート1[日付],[日付]=[_THISROW]-1 )</code></pre><p>正しい記述</p><pre><code>SELECT (シート1[継続スコア],[日付]=[_THISROW]-1 )</code></pre><p>python のような抽象度の高い言語を普段扱っているので、コンパイルを通らないという壁を乗り越えるのに苦労した。</p><h3 id="ハマったところ2" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">ハマったところ2<a href="#ハマったところ2" title="ハマったところ2"><i class="fas fa-link ml-1" style="display:none;"></i></a></h3><p>色々と触っているうちにエラーのままの機能がでてきた。そのせいでinfoが赤く表示された。必要の無い機能は削除しておくのが安全。</p><h3 id="実装したいこと" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">実装したいこと<a href="#実装したいこと" title="実装したいこと"><i class="fas fa-link ml-1" style="display:none;"></i></a></h3><ul><li><p>朝に即興小説を書いて、このアプリで進捗を打ち込んだ後にポップアップで褒めて欲しい。note だと継続日数に応じて応援の言葉が出てきて嬉しい。なので同じような機能をつけるとゲーム感が増すかも！</p></li><li><p>ハイスコアを表示したい。できたらランキング形式に出来るとゲームっぽい。複数のユーザーで競争できるとよいかも。</p></li></ul><p>対策:単純にソートして最大値を取り出すようにすればいいのでは？</p><ul><li>ユーザー毎に異なるシートを参照させたい。こアプリで他のユーザーとデータを共有したくはない。</li></ul><p>対策:ユーザーのメールアドレスを入力する列を追加して、検索で現在のユーザーのデータだけを抽出した。結果としてユーザー毎に異なるシートを参照する必要はなくなった。</p><ul><li>複数の日課の継続度合いを一つのアプリで可視化したい。</li></ul><p>対策:そのためにはシートを操作する必要がある？複数のスコアを並べると複雑になって、直感的な理解が妨げられるのでは？</p><ul><li>目標とタスクのビューにあるやったの列を毎日自動でリセットしたい。</li></ul><p>対策:Behaviorでなんとかなるのかな？</p><h2 id="まとめ" onmouseover="this.querySelector('a .fa-link').style.display='inline-block'" onmouseout="this.querySelector('a .fa-link').style.display='none'">まとめ<a href="#まとめ" title="まとめ"><i class="fas fa-link ml-1" style="display:none;"></i></a></h2><p>ひとまず動くアプリが出来た！</p><p>ノーコードとは言いつつ条件分岐などでコードの記述は求められる。</p><p>自分の理想と実現可能な実力とのギャップを明確にできた。</p></div></body>
